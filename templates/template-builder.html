{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block header %}
    {{selected_project_name}}
{% endblock header %}

{% block content %}
<div class="container-fluid my-5">
    <div class="row">
        <form method="post" action="{% url 'template-builder' name=selected_project.name %}" >
            {% csrf_token %}
            <div class="container-fluid my-5">
                <div class="row">
                    <div class="col-sm-2 custom-background form-label button-nice-font">
                        <p>Agent Fields:</p>
                            {{ form.fields|as_crispy_field }}
                    </div>
        
                    <div class="col-sm-5 custom-background form-label nice-font">
                        <p >Project Name: {{selected_project.name}}</p>
                        {{ form.template_name|as_crispy_field }}
                        {{ form.template|as_crispy_field }}
                        <input type="hidden" name="formatted_template" value="{{ form.formatted_template.value }}">
                        <div class="d-flex justify-content-end">
                            <button class="btn btn-outline-warning generate-button" type="submit" name="format">Format</button>
                        </div>
                    </div>
        
                    <div class="col-sm-5 custom-background">
                        <label for="preview_area" class="form-label nice-font">Template Preview</label>
                        <div id="preview_area" class="scrollable-div form-nice-font" >{{ preview_text|safe }}</div>
                        
                        {% if preview_text %}
                        <div class="d-flex justify-content-end">
                            <button class="btn btn-outline-warning generate-button" type="submit" name="save">Save Template</button>
                        </div>
                        {% endif %}
                            

                    </div>
                </div>
            </div>
        </form>        
        
    </div>
</div>


{% endblock content %}